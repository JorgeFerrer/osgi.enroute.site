<!DOCTYPE html>
<html lang="en" ng-app="jpm">

	<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="/css/style.css" rel="stylesheet" />
<title>Workspace Setup</title>


</head>


<body>

	
		
	
		
	
		
			<style>
				 body {
					counter-reset: h1 3;
				}
			</style>
				
		
	
		
	
		
	
		
	
		
	
		
	
		
	

	<style>
.slidein {
  animation-duration: 3s;
  animation-name: slidein;
  -webkit-animation-duration: 3s;
  -webkit-animation-name: slidein;
}

@keyframes slidein {
  from {
  	top:-100px;
  }

  to {
  	top:0px;
  }
}
@-webkit-keyframes slidein {
  from {
  	top:-100px;
  }

  to {
  	top:0px;
  }
}

</style>
<ul class="container12 menu-bar">
	<li span=8><a class=menu-link href="/"><img class=menu-logo
			src='/img/EnRouteIcon_CMYK.png'></a> <a
		href="/book/100-introduction.html">Intro </a><a
		href="/book/200-quick-start.html">Quick Start </a><a
		href="/book/300-overview.html">Overview </a><a
		href="/links.html">Links </a><a
		href="/forum.html">Forum</a>
	<li class=menu-link span=3>
	<li class=menu-link span=1 style=position:relative>
		<img src="/img/under-construction.png" class=slidein style="width:100px;position:fixed;top:0px">
	
</ul>


					

	<ul class=container12>
		<li span=3>
			<div>
			<ul class="side-nav">
	
		
			<li><a href="/book/100-introduction.html">Introduction</a>
	  	
  	
		
			<li><a href="/book/200-quick-start.html">Quick Start</a>
	  	
  	
		
			<li class=selected>Workspace Setup
	  	
  	
		
			<li><a href="/book/300-principles.html">Principles</a>
	  	
  	
		
			<li><a href="/book/400-architecture.html">Architecture</a>
	  	
  	
		
			<li><a href="/book/500-toolchain.html">Toolchain</a>
	  	
  	
		
			<li><a href="/book/600-best-practices.html">Best Practices</a>
	  	
  	
		
			<li><a href="/book/700-links.html">Links</a>
	  	
  	
		
			<li><a href="/book/800-profiles.html">Profiles</a>
	  	
  	
</ul>

			</div>
			
		<li span=9>
			<img class=short-header src="/img/header-short-book.png">
			<div class='notes-margin book'>
				<h1> Workspace Setup</h1>
				<p>In the simplistic setup we overlap the Eclipse workspace with the bnd workspace. This is ok for a quick try but has the disadvantage that the Eclipse preferences are under source control. Though you can easily prevent the Eclipse .metadata directory from being shared, it means that it becomes discardable by the source control system. That is, if you restore the git workspace with <code>git clean -fdx</code> then you delete all files that are ignored. Kind of disappointing to see all that work you spent on that fancy color scheme being nuked. It happened many times to us.</p>

<p>For this reason, a much better setup is to separate the Eclipse workspace from the bnd workspace. After lots of research, deep thinking coffee, and long lunches we came to the following setup as best practice:</p>

<pre><code>/&lt;workspaces path&gt;/                      path to all your workspaces
  com.workspace.topic/                   A workspace directory
    .metadata/                           The Eclipse workspace metadata
    scm/                                 The directory under source control
      .git/                              The scm metadata directory
      cnf/                               The bnd(tools) configuration project
      com.workspace.topic.subject.&lt;ext&gt;/ A project directory
        ...
</code></pre>

<p>This setup makes it easy to throw away a temporary workspace since the bnd workspace is nested in the Eclipse workspace but it makes it impossible to nuke your Eclipse preferences and history.</p>

<p>There are several ways to correctly setup the Eclipse and bnd workspaces. These are discussed in the following sections.</p>

<ul>
  <li><a href="#bndtoolsws">Setting Up a Workspace with bndtools</a></li>
  <li><a href="#bndws">Setting Up a Workspace with bnd</a></li>
  <li><a href="#manually">Setting Up a Workspace manually</a></li>
</ul>

<h2 id="a-namebndtoolswsa-setting-up-a-workspace-with-bndtools"><a name="bndtoolsws"></a> Setting Up a Workspace with Bndtools</h2>
<p>Bndtools can setup a new workspace from git with everything initialized. This works as follows.</p>

<ul>
  <li>Start bndtools, and create a new workspace. Eclipse will prompt you for a place to put the Eclipse workspace. It is best practice to follow these guidelines:
    <ul>
      <li>Gather all workspaces in a single directory. Believe me, you will create lots of them. </li>
      <li>Use a short path for your workspaces collection without spaces, if you use a shell it is a lot easier to get to and many tools barf on spaces in a path. Best practice is to use <code>/Ws</code> or so (this is what we assume in the following examples.</li>
      <li>Do name the workspace with a really unique name, this makes it possible to share it with others. Also make sure to take advantage of the sorting order so that long lists remain readable. The reverse domain name is quite workable for this goal. </li>
    </ul>

    <p>E.g. <code>com.acme.prime</code>, the path is therefore <code>/Ws/com.acme.prime</code>.</p>
  </li>
</ul>

<p>Once you’ve started bndtools on the <code>/Ws/com.acme.prime</code> folder as workspace, you can import a git project. For this, select <code>File/Import</code>. This shows a dialog where you can select the Git import.</p>

<p><img src="/img/book/qs/gitimport.jpg" alt="Select Import and then Git" /></p>

<p>Proceeding, with <code>Projects from Git</code> gives us:</p>

<p><img src="/img/book/qs/cloneuri.jpg" alt="Select the Clone URI" /></p>

<p>Where we will select the <code>Clone URI</code>. The next page in the wizard allows us to specify where to clone from. The OSGi enRoute project has a nice archetype for you where everything is setup nicely:</p>

<pre><code>git@github.com:osgi/osgi.enroute.archetype.git
</code></pre>

<p>So we should fill this in in this dialog:</p>

<p><img src="/img/book/qs/settings.jpg" alt="Import the archetype" /></p>

<p>Then we need to select the master branch:</p>

<p><img src="/img/book/qs/branch-selection.jpg" alt="Import the archetype" /></p>

<p>If we click on <code>Next</code>, then we must provide the location of the bnd workspace, this is where the proverbial beef hits the ground, or something like that. By default, Eclipse’s git will try to store this in your user home directory, in the <code>git</code> folder. However, as discussed earlier, we want it in a subfolder of our Eclipse workspace. Therefore, we place it in <code>/Ws/com.acme.prime/scm</code>.</p>

<p><img src="/img/book/qs/destination.jpg" alt="Select the scm folder" /></p>

<p>The next step is to import any projects from the archetype workspace. </p>

<p><img src="/img/book/qs/import-projects.jpg" alt="Import projects" /></p>

<p>We can now end this tedious process and hit finish. If we then select the <code>Bndtools</code> perspective, we get something like the following views in our Eclipse:</p>

<p><img src="/img/book/qs/final.jpg" alt="Final result" /></p>

<h2 id="a-namebndwsa-setting-up-a-workspace-with-bnd"><a name="bndws"></a> Setting Up a Workspace with bnd</h2>

<h2 id="a-namemanuallya-setting-up-a-workspace-manually"><a name="manually"></a> Setting Up a Workspace manually</h2>


			</div>
	</ul>

	
<nav class=next-prev>
	<a href=''></a> <a href=''></a>
</nav>
<footer class="container12" style="border-top: 1px solid black;padding:10px 0">
	<ul span=12 row>
		<li span=3>
			<ul>
				<li><a href="/contact.html">Contact</a>
			</ul>
		<li span=3>
			<ul>
				<li><a href="">Developers</a>
			</ul>
		<li span=4>
			<ul>
				<li><a href="">More</a>
			</ul>
		<li span=2>
			<a href="htt[://www.osgi.org"><img style="float:right;width:8em" src="/img/osgi-logo-256.png"></a>
	</ul>
</footer>

</body>
</html>
